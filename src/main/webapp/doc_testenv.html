<h1>Manage Test Environment</h1>

<p>Typically a test process involves several test environments at different stages including component (unit), integration, and production. And environment builds on one or more hosts.</p>

<p>You may have built or are going to create scripts to solve various environment-replated problems, like deploying packages, checking the build validity, configuring the environment, launching the automation, etc.</p>

<p>TestMP help you organize, schedule, visualize, and monitor these local / remote scripts, to facilitate the test environment &amp; process management.</p>

<p>At first, there are some related terms:</p>

<ul>
<li><em>Environment</em> - a concept about the hardware / software context in which the test is performed.</li>
<li><em>Host</em> - one or more devices that comprise the hardware part on which a test environment is built.</li>
<li><em>Task</em> - a concept about a group of executions on selected hosts belonging to an environment, usually with a certain purpose.</li>
<li><em>Execution</em> - a concept about a script / command running against a specified host, which will generate some results on the end.</li>
</ul>


<p><img src="./img/Doc-TestEnv.png" alt="Doc-TestEnv.png" /></p>

<p>Adding an environment to TestMP is intuitive: open the 'Test Environment' tab and click the 'New' button. Then input the environment's name and optionally give a url of the <em>reference page</em> on which the environment detail can be found.</p>

<p>Then you can define tasks for this environment: click the 'Tasks' icon of this environment record; on the pop-up window, click the 'New' button; Then input the task name, and optionally set the schedule if you hope it run repeatly and expectedly. The <a href="./schedule-syntax.txt">schedule syntax</a> is unix-like but a little different.</p>

<pre><code>By default, the schedule will take effect at most in 600 seconds. You can configure it in the conf/testmp.properties.
</code></pre>

<p>A task can have multiple executions at the same time: click the <em>Executions</em> icon of the task record to open the window. Each execution has the following fields:</p>

<ul>
<li><em>on/off</em> - enable or disable such execution.</li>
<li><em>Host</em> - the host on which the execution is expected to run.</li>
<li><em>Working Directory</em> - the current directory for the execution.</li>
<li><em>Command</em> - the actual command to be executed.</li>
<li><em>RetCode</em> - the returned code of the execution's last run.</li>
<li><em>Trace</em> - the output of the last execution, which can be refreshed if the last run is still in progress.</li>
</ul>


<p>When adding a new execution record, by default, its <em>Host</em> will be set to "localhost", the host on which TestMP is running. If you want it to be another, you'll need to firstly register that host.</p>

<p>Click the 'Hosts' button on the "Test Environment" tab. For each added new host, the hostname, username, and password are required to setup the SSH connection.</p>

<pre><code>For connection failures, you may want to make sure the host administrator has enabled the "password" authentication method for its SSH configuration.
</code></pre>

<p>Besides scheduling the tasks, you can launch them at any time by clicking the 'Run' button of the task record.</p>

<p>By clicking the 'Report' button on the "Test Environment" tab, you will get a summary report about the status of all the test environments shown in list, just like below:</p>

<p><img src="./img/Doc-EnvReport.png" alt="Doc-EnvReport.png" /></p>

<p>and you can send it as email to the people who are interested in this.</p>